<metal:layout use-macro="load: layout.pt">
    <metal:content metal:fill-slot="content">
        <div class="ui divided items" tal:condition="result|None">
            <div class="item" tal:repeat="item result['items']">
                <div class="content">
                    <a class="header" tal:attributes="href item.url">${item.title}</a>
                    <div class="description">
                        <p></p>
                        <p></p>
                    </div>
                    <div class="extra">
                        <i class="fork icon"></i>
                        ${item.data.path}
                    </div>
                </div>
            </div>
        </div>
        <div class="ui center aligned basic segment">
            <div class="ui pagination menu" tal:condition="batch_links|None">
                <a tal:repeat="link [l for l in batch_links if l.get('title')]"
                    tal:attributes="
                    href link.get('url');
                    class link.get('class', 'item')
                    .replace('current', 'item active')
                    .replace('prev', 'item')
                    .replace('next', 'item')

                    ">
                    ${link.title}
                </a>
            </div>
        </div>

        <div class="searchresults" tal:condition="result|None">
            <dl>
                <tal:item tal:repeat="item result['items']">
                    <dt class="packagename">
                        <a tal:omit-tag="not item.get('url')" tal:attributes="href item.url">
                            ${item.title}
                        </a>
                    </dt>
                    <dd class="packageinfo">
                        <div class="packagedetails"><span>${item.data.path}</span></div>
                        <dl tal:repeat="sub_hit item.sub_hits">
                            <dt>
                                <a tal:omit-tag="not sub_hit.get('url')" tal:attributes="href sub_hit.url">
                                    ${sub_hit.title}
                                </a>
                            </dt>
                            <dd condition="sub_hit.highlight">
                                <span tal:replace="structure sub_hit.highlight" />
                            </dd>
                        </dl>
                        <div class="packagefurther" tal:condition="item.get('more_count')">
                            <a tal:omit-tag="not item.get('more_url')" tal:attributes="href item.more_url">
                                ${item.more_count} more results for ${item.data.name} â€¦
                            </a>
                        </div>
                    </dd>
                </tal:item>
            </dl>
        </div>
        <div id="content" tal:condition="not result|None">
            <p>Your search <strong>${query}</strong> did not match anything.</p>
        </div>

    </metal:content>
</metal:layout>
